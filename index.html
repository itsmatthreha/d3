<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Line Chart with D3</title>
    <script src="https://d3js.org/d3.v7.min.js"></script>
</head>
<body>
    <svg width="800" height="400"></svg>

    <script>
        // Set up dimensions
        const width = 800, height = 400, margin = { top: 20, right: 30, bottom: 30, left: 50 };

        // Select the SVG
        const svg = d3.select("svg")
            .attr("width", width)
            .attr("height", height);

        // Load CSV data
        d3.csv("senators.csv").then(data => {
            // Parse year and convert percentages to numbers
            const parseDate = d3.timeParse("%Y");
            data.forEach(d => {
                d.date = parseDate(d.Year); // Parse the Year as a date
                // Remove the "%" and convert to number
                Object.keys(d).forEach(key => {
                    if (key !== "Year" && d[key]) {
                        d[key] = parseFloat(d[key].replace('%', '')); // Remove '%' and convert to number
                    }
                });
            });

            console.log(data);  // Check the parsed data in the console

            // Set up scales
            const x = d3.scaleTime()
                .domain(d3.extent(data, d => d.date))
                .range([margin.left, width - margin.right]);

            const y = d3.scaleLinear()
                .domain([0, 100])  // You want the y-axis to go from 0 to 100
                .range([height - margin.bottom, margin.top]);

            // Create axes
            svg.append("g")
                .attr("transform", `translate(0,${height - margin.bottom})`)
                .call(d3.axisBottom(x));

            svg.append("g")
                .attr("transform", `translate(${margin.left},0)`)
                .call(d3.axisLeft(y));

            // Create the lines for each senator
            const line = d3.line()
                .x(d => x(d.date)) // x is the date
                .y(d => y(d["Patty Murray"])); // y is the value for Patty Murray

            // Plot lines for each senator
            Object.keys(data[0]).forEach(key => {
                if (key !== "Year" && data[0][key] !== undefined) {
                    svg.append("path")
                        .datum(data)
                        .attr("fill", "none")
                        .attr("stroke", "steelblue") // You can assign a different color to each senator later
                        .attr("stroke-width", 2)
                        .attr("d", d3.line()
                            .x(d => x(d.date))
                            .y(d => y(d[key]))); // Use senatorâ€™s data for y-values
                }
            });
        });
    </script>
</body>
</html>

